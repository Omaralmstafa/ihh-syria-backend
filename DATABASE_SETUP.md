# ุฏููู ุฅูุดุงุก ูุฑุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช - Database Setup Guide

## ๐๏ธ ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช PostgreSQL ุนูู Render

### ุงูุฎุทูุฉ 1: ุงูุฏุฎูู ุฅูู Render

1. ุงุฐูุจ ุฅูู [render.com](https://render.com)
2. ุณุฌู ุฏุฎูู (ูููู ุงุณุชุฎุฏุงู GitHub)

### ุงูุฎุทูุฉ 2: ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช

1. ุงุถุบุท **New +** ูู ุฃุนูู ุงูุตูุญุฉ
2. ุงุฎุชุฑ **PostgreSQL**

### ุงูุฎุทูุฉ 3: ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุงูุญููู ุงููุทููุจุฉ:

**Name** (ุงุณู ุงูุชุนุฑูู):
```
ihh-syria-db
```
(ูุฐุง ููุชุนุฑูู ููุท ูู Render Dashboard)

**Database** (ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช):
```
ihh_syria
```
(ูุฐุง ูู ุงูุงุณู ุงููุนูู ููุงุนุฏุฉ ุงูุจูุงูุงุช)

**User** (ุงุณู ุงููุณุชุฎุฏู):
```
ihh_syria_user
```
(ุงุณู ุงููุณุชุฎุฏู ููุงุชุตุงู)

**Region** (ุงูููุทูุฉ):
```
Oregon (US West)
```
ุฃู ุฃู ููุทูุฉ ูุฑูุจุฉ ููู

**PostgreSQL Version**:
```
15
```
(ุฃู ุงุชุฑูู ุนูู ุงูุงูุชุฑุงุถู)

**Plan** (ุงูุฎุทุฉ):
```
Free
```
(ููุจุฏุงูุฉ ูุงูุชุฌุฑุจุฉ)
- Free: 90 ููู ููุท
- Starter: $7/ุดูุฑ (ููุฅูุชุงุฌ)

### ุงูุฎุทูุฉ 4: ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช

1. ุฑุงุฌุน ุฌููุน ุงูุฅุนุฏุงุฏุงุช
2. ุงุถุบุท **Create Database**
3. ุงูุชุธุฑ ุงูุชูุงู ุงูุฅูุดุงุก (1-2 ุฏูููุฉ)

---

## ๐ ุฑุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงูู Backend

### ุงูุทุฑููุฉ 1: ุงูุฑุจุท ุงูุชููุงุฆู (ููุตู ุจู)

ุนูุฏ ุฅูุดุงุก Backend Service:

1. **New +** > **Web Service**
2. ุงููุฃ ุฅุนุฏุงุฏุงุช Backend
3. ูู ูุณู **Database** ุฃู **Add Database**:
   - ุงุถุบุท **Link Database**
   - ุงุฎุชุฑ `ihh-syria-db` ูู ุงููุงุฆูุฉ
   - ุณูุชู ุฅุถุงูุฉ `DATABASE_URL` ุชููุงุฆูุงู

### ุงูุทุฑููุฉ 2: ุงูุฑุจุท ุงููุฏูู

#### ุฅุฐุง ูุงู Backend ููุฌูุฏุงู ุจุงููุนู:

1. ุงุฐูุจ ุฅูู Backend Service
2. ุงุถุบุท **Settings**
3. ุงุจุญุซ ุนู **Database** ุฃู **Add Database**
4. ุงุถุบุท **Link Database**
5. ุงุฎุชุฑ `ihh-syria-db`
6. ุณูุชู ุฅุถุงูุฉ `DATABASE_URL` ุชููุงุฆูุงู

### ุงูุทุฑููุฉ 3: ุฅุถุงูุฉ DATABASE_URL ูุฏููุงู

ุฅุฐุง ูู ูุนูู ุงูุฑุจุท ุงูุชููุงุฆู:

1. ูู Backend Service > **Environment**
2. ุงุถุบุท **Add Environment Variable**
3. **Key**: `DATABASE_URL`
4. **Value**: 
   - ุงุฐูุจ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ุงูุณุฎ **Internal Database URL**
   - ุฃู **External Database URL** (ุฅุฐุง ููุช ุชุฑูุฏ ุงูุงุชุตุงู ูู ุฎุงุฑุฌ Render)
5. ุงุถุบุท **Save Changes**

---

## ๐ ูุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุจุนุฏ ุงูุฅูุดุงุกุ ุณุชุฌุฏ ูู ุตูุญุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช:

### Internal Database URL (ููุงุณุชุฎุฏุงู ุฏุงุฎู Render):
```
postgresql://ihh_syria_user:password@dpg-xxxxx-a/ihh_syria
```

### External Database URL (ููุงุณุชุฎุฏุงู ูู ุฎุงุฑุฌ Render):
```
postgresql://ihh_syria_user:password@dpg-xxxxx-a.oregon-postgres.render.com:5432/ihh_syria
```

### ูุนูููุงุช ูููุตูุฉ:

- **Host**: `dpg-xxxxx-a.oregon-postgres.render.com`
- **Port**: `5432`
- **Database**: `ihh_syria`
- **User**: `ihh_syria_user`
- **Password**: (ุณูุชู ุฅูุดุงุคู ุชููุงุฆูุงู)

**โ๏ธ ููู:** ุงุญูุธ ูููุฉ ุงููุฑูุฑ ูู ููุงู ุขูู!

---

## โ ุงูุชุญูู ูู ุงูุฑุจุท

### 1. ูู Render Dashboard

- Backend Service > Environment
- ูุฌุจ ุฃู ุชุฑู `DATABASE_URL` ููุฌูุฏ

### 2. ูู ุฎูุงู Health Check

```
GET https://your-backend.onrender.com/health
```

ูุฌุจ ุฃู ุชุฑู:
```json
{
  "status": "healthy",
  "database": "connected"
}
```

### 3. ูู ุฎูุงู Logs

- Backend Service > Logs
- ุงุจุญุซ ุนู ุฑุณุงุฆู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุง ูุฌุจ ุฃู ุชุฑู ุฃุฎุทุงุก connection

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: Database connection failed

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ูุฑุจูุทุฉ
2. `DATABASE_URL` ุบูุฑ ููุฌูุฏ ุฃู ุฎุงุทุฆ
3. ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ูุดุทุฉ

**ุงูุญู:**
1. ุชุญูู ูู ุฑุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. ุชุญูู ูู `DATABASE_URL` ูู Environment Variables
3. ุชุฃูุฏ ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช Status: Available

### ูุดููุฉ: DATABASE_URL not found

**ุงูุญู:**
1. ุงุฑุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู Backend Settings
2. ุฃู ุฃุถู `DATABASE_URL` ูุฏููุงู ูู Environment Variables

### ูุดููุฉ: Authentication failed

**ุงูุญู:**
1. ุชุญูู ูู ูููุฉ ุงููุฑูุฑ
2. ุงุณุชุฎุฏู Internal Database URL (ููุณ External)
3. ุชุฃูุฏ ูู ุฃู User ุตุญูุญ

---

## ๐ก ูุตุงุฆุญ

1. **ุงุณุชุฎุฏู Internal Database URL** ููุงุชุตุงู ูู Backend ุนูู Render
2. **ุงุญูุธ ูููุฉ ุงููุฑูุฑ** ูู ููุงู ุขูู
3. **ูู ุจุนูู Backup** ุจุงูุชุธุงู
4. **Free Plan** ูุญุฏูุฏ ุจู 90 ููู ููุท
5. **Starter Plan** ($7/ุดูุฑ) ููุฅูุชุงุฌ

---

## ๐ ูุซุงู ูุงูู

### 1. ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```
Render > New + > PostgreSQL
Name: ihh-syria-db
Database: ihh_syria
User: ihh_syria_user
Plan: Free
Create Database
```

### 2. ุฑุจุทูุง ุจุงูู Backend:
```
Backend Service > Settings > Link Database
ุงุฎุชุฑ: ihh-syria-db
โ DATABASE_URL ูุถุงู ุชููุงุฆูุงู
```

### 3. ุงูุชุญูู:
```
GET /health
Response: {"status": "healthy", "database": "connected"}
```

---

## โ ุงููุชูุฌุฉ

ุจุนุฏ ุงูุฑุจุท ุงููุงุฌุญ:
- โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููุตูุฉ ููุณุชููุฉ
- โ Backend ูุชุตู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ `DATABASE_URL` ููุฌูุฏ ุชููุงุฆูุงู
- โ ูู ุดูุก ูุนูู!

